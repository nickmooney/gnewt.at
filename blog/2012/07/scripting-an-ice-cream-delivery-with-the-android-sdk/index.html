<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
<title>  Scripting an Ice Cream Delivery with the Android SDK | Gnewt&#039;s Blag</title>
<meta name="description" content="Scripting an Ice Cream Delivery with the Android SDK" />
<link rel="alternate" type="application/rss+xml" title="Gnewt&#039;s Blag RSS Feed" href="../../../feed/index.html" />
<link rel="alternate" type="application/atom+xml" title="Gnewt&#039;s Blag Atom Feed" href="../../../feed/atom/index.html" /> 
<link rel="pingback" href="http://www.gnewt.at/blog/xmlrpc.php" />

<link rel="stylesheet" href="../../../wp-content/themes/monochrome/style.css" type="text/css" />
<link rel="stylesheet" href="../../../wp-content/themes/monochrome/comment-style.css" type="text/css" />
<!--[if lt IE 7]>
<link rel="stylesheet" href="http://www.gnewt.at/blog/wp-content/themes/monochrome/ie6.css" type="text/css" />
<![endif]--> 
<style type="text/css">
.post img, .post a img { border:1px solid #ccc; padding:5px; margin:0 10px 0 0;  background:#f2f2f2; }
.post a:hover img { border:1px solid #38a1e5; background:#9cd1e1; }
.post img.wp-smiley { border:0px; padding:0px; margin:0px; background:none; }
</style>

 
<link rel='dns-prefetch' href='http://s.w.org/' />
<link rel="alternate" type="application/rss+xml" title="Gnewt&#039;s Blag &raquo; Scripting an Ice Cream Delivery with the Android SDK Comments Feed" href="feed/index.html" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/www.gnewt.at\/blog\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.7.2"}};
			!function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),!(j.toDataURL().length<3e3)&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,65039,8205,55356,57096),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,55356,57096),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55357,56425,55356,57341,8205,55357,56507),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55357,56425,55356,57341,55357,56507),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<!-- This site uses the Google Analytics by MonsterInsights plugin v5.5.4 - Universal enabled - https://www.monsterinsights.com/ -->
<script type="text/javascript">
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','__gaTracker');

	__gaTracker('create', 'UA-32955882-1', 'auto');
	__gaTracker('set', 'forceSSL', true);
	__gaTracker('send','pageview');

</script>
<!-- / Google Analytics by MonsterInsights -->
<script type='text/javascript' src='../../../wp-includes/js/jquery/jquery.js%3Fver=1.12.4'></script>
<script type='text/javascript' src='../../../wp-includes/js/jquery/jquery-migrate.min.js%3Fver=1.4.1'></script>
<link rel='https://api.w.org/' href='../../../wp-json/index.html' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../xmlrpc.php%3Frsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Bi-directional Caller ID Spoofing with Asterisk' href='../../../index.html%3Fp=225.html' />
<link rel='next' title='Publishing Data to Redis with Django Signals' href='../../../index.html%3Fp=244.html' />
<meta name="generator" content="WordPress 4.7.2" />
<link rel="canonical" href="../../../index.html%3Fp=235.html" />
<link rel='shortlink' href='../../../index.html%3Fp=235.html' />
<link rel="alternate" type="application/json+oembed" href="../../../wp-json/oembed/1.0/embed%3Furl=http%253A%252F%252Fwww.gnewt.at%252Fblog%252F2012%252F07%252Fscripting-an-ice-cream-delivery-with-the-android-sdk%252F" />
<link rel="alternate" type="text/xml+oembed" href="../../../wp-json/oembed/1.0/embed%3Furl=http%253A%252F%252Fwww.gnewt.at%252Fblog%252F2012%252F07%252Fscripting-an-ice-cream-delivery-with-the-android-sdk%252F&amp;format=xml" />
<style type="text/css" id="syntaxhighlighteranchor"></style>
<script type="text/javascript" src="../../../wp-content/themes/monochrome/js/scroll.js"></script>
<script type="text/javascript" src="../../../wp-content/themes/monochrome/js/jscript.js"></script>
<script type="text/javascript" src="../../../wp-content/themes/monochrome/js/comment.js"></script>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-15905622-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</head>

<body>
<div id="wrapper">

 <div id="header">

  <div id="header_top">

   <div id="logo">
       <a href="../../../../index.html">Gnewt&#039;s Blag</a>
    <h1>She turned me into a Gnewt! I got better&#8230;</h1>
      </div>

      <div class="header_menu">
    <ul class="menu">
     <li class="page_item"><a href="../../../../index.html">HOME</a></li>
     <li class="page_item page-item-2"><a href="../../../index.html%3Fp=2.html">/usr/bin/whoami</a></li>
    </ul>
   </div>
   
  </div>

  </div><!-- #header end -->  <div id="contents" class="clearfix">

   <div id="left_col">

        <div id="header_meta">
     <ul id="bread_crumb" class="clearfix">
      <li id="bc_home"><a href="../../../../index.html">HOME</a></li>
      <li id="bc_cat"><a href="../../../category/uncategorized/index.html" rel="category tag">Uncategorized</a></li>
      <li>Scripting an Ice Cream Delivery with the Android SDK</li>
     </ul>
    </div>
    

    <div class="post clearfix" id="single_post">
     <div class="post_content_wrapper">
      <h2 class="post_title"><span>Scripting an Ice Cream Delivery with the Android SDK</span></h2>
      <div class="post_content">
       <p>Today, a smartphone-connected taxi company called <a href="https://www.uber.com/" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://www.uber.com/', 'Uber');">Uber</a>Â is operating five ice cream trucks in Seattle. You click a button in the Uber app and select your location, and an ice cream truck comes to you. Or at least that&#8217;s what should happen. Even with today&#8217;s weather (read: periodic torrential rain), people are clamoring to get their ice cream due to the fact that it&#8217;s only available for one day&#8230; meaning almost nobody is actually able to get a spot in the queue. Uber&#8217;s Twitter feed is full of advice telling customers just keep hitting the button, but man, I have work to do. I can&#8217;t sit here and press the little ice cream icon all day. Something has got to give.</p>
<p><img class="aligncenter" src="http://i.imgur.com/2Bt6zl.png" alt="" width="360" height="640" /></p>
<p>The Android SDK contains a tool called <a href="http://developer.android.com/tools/help/monkeyrunner_concepts.html" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://developer.android.com/tools/help/monkeyrunner_concepts.html', 'monkeyrunner');">monkeyrunner</a>. Monkeyrunner lets you simulate touch events, take screenshots, etc&#8230; and it does it through a very simple Python library. I decided to see if I could write a little script to keep pressing the ice cream button in Uber&#8217;s app, and it only took a few minutes.</p>
<pre class="brush: python; title: ; notranslate" title="">from time import sleep
from com.android.monkeyrunner import MonkeyRunner, MonkeyDevice

# Attach to Android device
d = MonkeyRunner.waitForConnection()

# Take a screenshot of the &quot;sorry, keep trying&quot; screen for reference
raw_input(&quot;Get to the error screen, then hit enter.\n&quot;)
oldpic = d.takeSnapshot()

while True:
    # Touch the ice cream button
    d.touch(540, 200, MonkeyDevice.DOWN_AND_UP)
    sleep(4)
    newpic = d.takeSnapshot()
	# If the screen looks like our old error
	# screen (95%), hit OK and just keep going (in 10 seconds)
    if newpic.sameAs(oldpic, .95):
        d.touch(460, 700, MonkeyDevice.DOWN_AND_UP)
        sleep(10)
	# But if the screen has changed, stop running the loop.
    else:
		break
</pre>
<p>I still don&#8217;t have ice cream, but the script is running and working.</p>
             </div>
     </div>
     <dl class="post_meta">
        <dt class="meta_date">2012</dt>
         <dd class="post_date">07<span>/13</span></dd>
                <dt>CATEGORY</dt>
         <dd><a href="../../../category/uncategorized/index.html" rel="category tag">Uncategorized</a></dd>
                                 <dt class="meta_comment"><a href="../../../index.html%3Fp=235.html#comments"><span class="dsq-postid" data-dsqidentifier="235 http://www.gnewt.at/blog/?p=235">4 comments</span></a></dt>
             </dl>
    </div>


    <div id="comments_wrapper">
     
<div id="disqus_thread">
            <div id="dsq-content">


            <ul id="dsq-comments">
                    <li class="comment even thread-even depth-1" id="dsq-comment-11845">
        <div id="dsq-comment-header-11845" class="dsq-comment-header">
            <cite id="dsq-cite-11845">
                <span id="dsq-author-user-11845">Nobody</span>
            </cite>
        </div>
        <div id="dsq-comment-body-11845" class="dsq-comment-body">
            <div id="dsq-comment-message-11845" class="dsq-comment-message"><p>Hey that is awesome!! How are you running Python on the Java based Android OS?</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment byuser comment-author-admin bypostauthor odd alt thread-odd thread-alt depth-1" id="dsq-comment-12331">
        <div id="dsq-comment-header-12331" class="dsq-comment-header">
            <cite id="dsq-cite-12331">
                <span id="dsq-author-user-12331">Gnewt</span>
            </cite>
        </div>
        <div id="dsq-comment-body-12331" class="dsq-comment-body">
            <div id="dsq-comment-message-12331" class="dsq-comment-message"><p>I&#8217;m not running Python on Android (though it&#8217;s possible), I&#8217;m just running Python scripts that are included with the Android SDK on my laptop. They interface with the phone over ADB (Android Debug Bridge).</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment even thread-even depth-1" id="dsq-comment-52479">
        <div id="dsq-comment-header-52479" class="dsq-comment-header">
            <cite id="dsq-cite-52479">
                <span id="dsq-author-user-52479">Red</span>
            </cite>
        </div>
        <div id="dsq-comment-body-52479" class="dsq-comment-body">
            <div id="dsq-comment-message-52479" class="dsq-comment-message"><p>Clever! =)</p>
</div>
        </div>

    </li><!-- #comment-## -->
            </ul>


        </div>

    </div>

    </div>

        <div id="previous_next_post" class="clearfix">
     <p id="previous_post"><a href="../../../index.html%3Fp=225.html" rel="prev">Bi-directional Caller ID Spoofing with Asterisk</a></p>
     <p id="next_post"><a href="../../../index.html%3Fp=244.html" rel="next">Publishing Data to Redis with Django Signals</a></p>
    </div>
    
   </div><!-- #left_col end -->

   <div id="right_col">
  
    <div id="information_area" class="clearfix">
   <div class="side_box" id="information">
    <h3>Information</h3>
    <div id="information_contents">I'm Gnewt and I make things.</div>
   </div>
      <div id="entries_rss">
    <a href="../../../feed/index.html" title="Entries RSS" >RSS FEED</a>
   </div>
     </div>
  
    <div class="side_box" id="search_area_top">
   <div id="search_area" class="clearfix">
        <form method="get" id="searchform" action="../../../../index.html">
     <div><input type="text" value="Search" name="s" id="search_input" onfocus="this.value=''; changefc('white');" /></div>
     <div><input type="image" src="../../../wp-content/themes/monochrome/img/search_button.gif" alt="Search from this blog." title="Search from this blog." id="search_button" /></div>
    </form>
       </div>
     </div>
  
  
   <div class="side_box">
   <h3>Recent entry</h3>
    <ul>
     <li class="side_date">2014-04-14</li>
     <li><a href="../../../index.html%3Fp=291.html">BHS Shirt Sales with Django</a></li>
     <li class="side_date">2014-01-14</li>
     <li><a href="../../../index.html%3Fp=276.html">What Would the Bhagavad Gita Say?</a></li>
     <li class="side_date">2013-09-15</li>
     <li><a href="../../../index.html%3Fp=250.html">Weekend Project: Web-controlled Christmas Lights with Node.js, Arduino, and Raspberry Pi</a></li>
     <li class="side_date">2013-08-18</li>
     <li><a href="../../../index.html%3Fp=244.html">Publishing Data to Redis with Django Signals</a></li>
     <li class="side_date">2012-07-13</li>
     <li><a href="../../../index.html%3Fp=235.html">Scripting an Ice Cream Delivery with the Android SDK</a></li>
   </ul>
  </div>

   <div class="side_box">
   <h3>Archive</h3>
   <ul>
    	<li><a href='../../../2014/04/index.html'>April 2014</a></li>
	<li><a href='../../../2014/01/index.html'>January 2014</a></li>
	<li><a href='../../../2013/09/index.html'>September 2013</a></li>
	<li><a href='../../../2013/08/index.html'>August 2013</a></li>
	<li><a href='../index.html'>July 2012</a></li>
	<li><a href='../../06/index.html'>June 2012</a></li>
	<li><a href='../../../2011/05/index.html'>May 2011</a></li>
	<li><a href='../../../2010/05/index.html'>May 2010</a></li>
	<li><a href='../../../2010/04/index.html'>April 2010</a></li>
	<li><a href='../../../2009/10/index.html'>October 2009</a></li>
	<li><a href='../../../2009/03/index.html'>March 2009</a></li>
   </ul>
   </div>

   <div class="side_box">
   <h3>Category</h3>
   <ul>
    	<li class="cat-item cat-item-23"><a href="../../../category/code/index.html" >Code</a>
</li>
	<li class="cat-item cat-item-1"><a href="../../../category/uncategorized/index.html" >Uncategorized</a>
</li>
   </ul>
   </div>


  
</div><!-- #right_col end -->
  </div><!-- #contents end -->

  <div id="footer">
   <ul id="copyright">
    <li style="background:none;">
                Copyright &copy;&nbsp; 2009-2017     &nbsp;<a href="../../../../index.html">Gnewt&#039;s Blag</a></li>
    <li><a href="http://www.mono-lab.net/">Theme designed by mono-lab</a></li>
    <li><a href="http://wordpress.org/">Powered by WordPress</a></li>
   </ul>
  </div>
 
</div><!-- #wrapper end -->

<div id="return_top">
 <a href="../../../index.html%3Fp=235.html#wrapper">&nbsp;</a>
</div>

<script type='text/javascript' src='../../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js%3Fver=3.0.9b'></script>
<script type='text/javascript' src='../../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPython.js%3Fver=3.0.9b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://www.gnewt.at/blog/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://www.gnewt.at/blog/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>
<script type='text/javascript' src='../../../wp-includes/js/comment-reply.min.js%3Fver=4.7.2'></script>
<script type='text/javascript' src='../../../wp-includes/js/wp-embed.min.js%3Fver=4.7.2'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var embedVars = {"disqusConfig":{"platform":"wordpress@4.7.2","language":""},"disqusIdentifier":"235 http:\/\/www.gnewt.at\/blog\/?p=235","disqusShortname":"gnewt","disqusTitle":"Scripting an Ice Cream Delivery with the Android SDK","disqusUrl":"http:\/\/www.gnewt.at\/blog\/2012\/07\/scripting-an-ice-cream-delivery-with-the-android-sdk\/","options":{"manualSync":false},"postId":"235"};
/* ]]> */
</script>
<script type='text/javascript' src='../../../wp-content/plugins/disqus-comment-system/media/js/disqus.js%3Fver=4.7.2'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var countVars = {"disqusShortname":"gnewt"};
/* ]]> */
</script>
<script type='text/javascript' src='../../../wp-content/plugins/disqus-comment-system/media/js/count.js%3Fver=4.7.2'></script>
</body>
</html>
<!-- Dynamic page generated in 0.058 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2017-02-01 13:12:33 -->
